@if (gameDetails$ | async; as game) {
  <h3>Spielübersicht</h3>
  <div class="game-info-container">
    <div class="game-info-item">
      <mat-icon>today</mat-icon>
      {{game.datetime | date:'dd.MM.yyyy'}}
    </div>

    <div class="game-info-item">
      <mat-icon>place</mat-icon>
      @if (game.place.type === PlaceTypeEnum.Home) {
        bei {{game.place.locationLabel}}
      } @else if (game.place.type === PlaceTypeEnum.Away) {
        {{game.place.type | placeTypeToLabel}} ({{game.place.locationLabel}})
      } @else {
        {{game.place.type | placeTypeToLabel}}
      }
    </div>

    @if (game.excludeFromStatistics) {
      <div class="game-info-item">
        <mat-icon>visibility_off</mat-icon>
        ohne Wertung
      </div>
    }

    <button mat-stroked-button (click)="openGameDetailsDialog()">
      <mat-icon>edit</mat-icon>
      bearbeiten
    </button>
  </div>

  @if (!game.completed) {
    <button mat-flat-button>
      <mat-icon>check</mat-icon>
      Spiel abschließen
    </button>
  }

  <mat-stepper orientation="vertical" #stepper>
    <ng-template matStepperIcon="edit" let-index="index">
      <span *ngIf="index > 0">{{index}}</span>
      <mat-icon *ngIf="index === 0">gavel</mat-icon>
    </ng-template>
    <ng-template matStepperIcon="number" let-index="index">
      <span *ngIf="index > 0">{{index}}</span>
      <mat-icon *ngIf="index === 0">gavel</mat-icon>
    </ng-template>

    <mat-step>
      @if (gameEvents$ | async; as gameEvents) {
        <p>{{gameEvents | json}}</p>
      }
    </mat-step>

    @for (round of roundsWithEvents$ | async; track round.id) {
      <mat-step>
        <p>{{round.datetime}}</p>
        <div>{{round.events | json}}</div>
      </mat-step>
    }
  </mat-stepper>

  @if (!game.completed) {
    <button mat-flat-button>
      <mat-icon>check</mat-icon>
      Spiel abschließen
    </button>
  }
}
